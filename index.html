 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Explore Samart's Gallery, a collection of top famous movies with category filtering, search, and vibrant themes." />
    <meta name="keywords" content="movies, movie gallery, films, watch movies, Samart's Gallery" />
    <title>Samart's Gallery - Top Famous Movies</title>
    <style>
        :root {
            --bg: #fff;
            --text: #222;
            --accent: #e50914;
            --card-bg: #f5f5f5;
            --card-shadow: rgba(0, 0, 0, 0.08);
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            transition: background 0.3s, color 0.3s;
            overflow-x: hidden;
        }
        .header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            background: var(--card-bg);
            padding: 12px 16px;
            box-shadow: 0 1px 4px var(--card-shadow);
            background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url('https://images.unsplash.com/photo-1598899134739-9b5859230d8c?auto=format&fit=crop&w=1200');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        @media (max-width: 768px) {
            .header {
                background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url('https://images.unsplash.com/photo-1598899134739-9b5859230d8c?auto=format&fit=crop&w=600');
            }
        }
        .logo {
            font-weight: bold;
            font-size: 1.5em;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: default;
            animation: popUp 1.5s ease forwards, thunderFlash 3s infinite;
            transform-origin: bottom center;
            position: relative;
            text-shadow: 0 0 10px var(--accent);
        }
        @keyframes popUp {
            0% { opacity: 0; transform: scale(0.7); }
            60% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes thunderFlash {
            0%, 10%, 20%, 30%, 100% { text-shadow: 0 0 10px var(--accent); }
            5%, 15%, 25% { text-shadow: 0 0 20px var(--accent), 0 0 30px #fff; opacity: 0.8; }
        }
        .search-bar {
            flex: 1;
            max-width: 300px;
            margin: 8px 16px;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 20px;
            font-size: 1em;
            background: var(--bg);
            color: var(--text);
            transition: border-color 0.2s;
        }
        .search-bar:focus {
            border-color: var(--accent);
            outline: none;
        }
        .theme-picker {
            display: flex;
            gap: 6px;
            align-items: center;
        }
        .theme-btn {
            width: 24px;
            height: 24px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            outline: 2px solid transparent;
            transition: outline 0.2s, transform 0.2s;
        }
        .theme-btn:hover {
            transform: scale(1.1);
        }
        .theme-btn.selected {
            outline: 3px solid var(--accent);
            transform: scale(1.2);
        }
        .theme-toggle {
            padding: 6px 12px;
            border: 1px solid var(--accent);
            border-radius: 20px;
            background: none;
            color: var(--text);
            cursor: pointer;
            font-size: 0.9em;
        }
        .theme-toggle:hover {
            background: var(--accent);
            color: #fff;
        }
        .refresh-btn {
            padding: 8px 16px;
            border: 1px solid var(--accent);
            border-radius: 20px;
            background: var(--accent);
            color: #fff;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 8px;
            transition: background 0.2s, transform 0.5s;
        }
        .refresh-btn:hover {
            background: #c50811;
            transform: translateY(-2px);
        }
        .refresh-btn.spinning {
            transform: rotate(360deg);
        }
        .sort-select {
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-radius: 20px;
            background: var(--bg);
            color: var(--text);
            font-size: 1em;
        }
        .category-bar {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            background: var(--card-bg);
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
            scrollbar-width: thin;
            scrollbar-color: var(--accent) var(--card-bg);
        }
        .category-bar::-webkit-scrollbar {
            height: 6px;
        }
        .category-bar::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }
        .category-btn {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1em;
            padding: 6px 14px;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, transform 0.2s;
            white-space: nowrap;
        }
        .category-btn:hover {
            background: var(--accent);
            color: #fff;
            transform: translateY(-2px);
        }
        .category-btn.active {
            background: var(--accent);
            color: #fff;
            box-shadow: 0 2px 4px var(--card-shadow);
        }
        .content-wrapper {
            margin-top: 20px;
        }
        .movies-collapse {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 15px;
            max-width: 1200px;
            margin: 0 auto;
            min-height: 500px;
        }
        .movie-card {
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 2px 8px var(--card-shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: box-shadow 0.3s;
            opacity: 0;
            transform: translateY(50px);
            will-change: opacity, transform;
        }
        .movie-card.visible {
            animation: fadeInUp 0.5s ease forwards;
        }
        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
        .movie-card:hover {
            box-shadow: 0 6px 24px var(--card-shadow);
        }
        .movie-poster {
            position: relative;
            padding-top: 56.25%;
        }
        .movie-poster img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            background: url('https://via.placeholder.com/300x168?text=Loading') center/cover;
            cursor: pointer;
        }
        .movie-poster img.error {
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 0.9em;
        }
        .movie-description {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .movie-description strong {
            font-size: 1em;
            margin-bottom: 6px;
            color: var(--accent);
        }
        .movie-description p {
            font-size: 0.8em;
            color: var(--text);
            margin: 0 0 6px;
            line-height: 1.3;
        }
        .season-link {
            display: block;
            margin: 3px 0;
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 5px;
            text-decoration: none;
            color: var(--accent);
            font-weight: 500;
            transition: background 0.2s, color 0.2s;
            font-size: 0.85em;
            border: 1px solid #eee;
        }
        .season-link:hover {
            background: var(--accent);
            color: #fff;
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 30px 0 20px 0;
            flex-wrap: wrap;
        }
        .pagination button {
            padding: 8px 14px;
            border-radius: 20px;
            border: none;
            background: linear-gradient(45deg, var(--accent), #ff6b6b);
            color: #fff;
            font-size: 0.9em;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s, transform 0.2s;
        }
        .pagination button:hover {
            transform: translateY(-2px);
        }
        .pagination button[disabled] {
            background: #ccc;
            cursor: not-allowed;
        }
        .pagination input {
            width: 50px;
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
            font-size: 0.9em;
        }
        .pagination span {
            font-size: 1em;
            color: var(--text);
        }
        .pagination .page-btn {
            background: none;
            border: 1px solid var(--accent);
            color: var(--text);
        }
        .pagination .page-btn.active {
            background: var(--accent);
            color: #fff;
        }
        .loading {
            text-align: center;
            color: var(--text);
            font-size: 1.1em;
            padding: 20px;
        }
        .skeleton {
            background: #eee;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        .marquee {
            white-space: nowrap;
            overflow: hidden;
            color: var(--text);
            font-size: 0.9em;
            padding: 10px;
            background: var(--card-bg);
            animation: scroll 20s linear infinite;
        }
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            background: var(--accent);
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 1002;
            transform: scale(0.8);
        }
        .back-to-top.visible {
            opacity: 1;
            transform: scale(1);
        }
        .back-to-top:hover {
            transform: scale(1.1);
        }
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1003;
            justify-content: center;
            align-items: center;
        }
        .image-modal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }
        .image-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #fff;
            font-size: 1.5em;
            cursor: pointer;
            padding: 10px;
        }
        footer {
            text-align: center;
            padding: 20px;
            color: var(--text);
            background: var(--card-bg);
            border-top: 1px solid #eee;
        }
        .bulb {
            font-size: 3em;
            transition: text-shadow 0.3s ease;
        }
        .bulb:hover {
            text-shadow: 0 0 20px yellow;
        }
        .liquid-text {
            font-size: 3em;
            background: url('https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif') repeat;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stitched {
            border: 2px dashed #333;
            padding: 20px;
            background: #f9f9f9;
            font-family: monospace;
        }
        .pulse {
            width: 100px;
            height: 100px;
            border: 5px solid red;
            border-radius: 50%;
            animation: pulse-animation 2s infinite;
            margin: 20px auto;
        }
        @keyframes pulse-animation {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        @keyframes explode {
            0% { transform: scale(1); }
            100% { transform: scale(1.5) rotate(20deg); color: red; }
        }
        .bomb-emoji {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .bomb-emoji:hover {
            transform: scale(1.2);
        }
        .disclaimer {
            font-size: 0.85em;
            color: #666;
            margin: 10px auto;
            text-align: center;
            max-width: 600px;
        }

        /* Mobile optimizations - always 2 columns */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
                padding: 8px 10px;
            }
            .search-bar {
                max-width: 100%;
                margin: 6px 0;
                font-size: 0.9em;
            }
            .theme-picker {
                flex-wrap: wrap;
                justify-content: center;
                gap: 4px;
            }
            .theme-btn {
                width: 20px;
                height: 20px;
            }
            .refresh-btn, .theme-toggle {
                font-size: 0.8em;
                padding: 6px 10px;
            }
            .category-bar {
                padding: 6px 8px;
            }
            .category-btn {
                padding: 4px 8px;
                font-size: 0.8em;
            }
            .movies-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 10px;
            }
            .movie-poster {
                padding-top: 140%;
            }
            .movie-description {
                padding: 8px;
            }
            .movie-description strong {
                font-size: 0.9em;
            }
            .movie-description p {
                font-size: 0.75em;
            }
            .season-link {
                font-size: 0.75em;
                padding: 4px 6px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 6px 8px;
            }
            .movies-container {
                gap: 8px;
                padding: 8px;
            }
            .movie-description {
                padding: 6px;
            }
            .bulb {
                font-size: 2em;
            }
            .liquid-text {
                font-size: 2em;
            }
        }

        /* Themes */
        .theme-light {
            --bg: #fff;
            --text: #222;
            --accent: #e50914;
            --card-bg: #f5f5f5;
            --card-shadow: rgba(0, 0, 0, 0.08);
        }
        .theme-dark {
            --bg: #181818;
            --text: #eee;
            --accent: #bb86fc;
            --card-bg: #232323;
            --card-shadow: rgba(0, 0, 0, 0.3);
        }
        .theme-neon {
            --bg: #0f0c29;
            --text: #fff;
            --accent: #39ff14;
            --card-bg: #1a1a2e;
            --card-shadow: 0 0 12px #39ff14, 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .theme-blue {
            --bg: #e3f2fd;
            --text: #0d47a1;
            --accent: #1565c0;
            --card-bg: #bbdefb;
            --card-shadow: rgba(33, 150, 243, 0.12);
        }
        .theme-rose {
            --bg: #fff0f3;
            --text: #ad1457;
            --accent: #e91e63;
            --card-bg: #fce4ec;
            --card-shadow: rgba(233, 30, 99, 0.1);
        }
        .theme-rgb-lightning {
            --bg: #000;
            --text: #fff;
            --accent: #ff0000;
            --card-bg: #1a1a1a;
            --card-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            animation: rgbGlow 3s infinite;
        }
        @keyframes rgbGlow {
            0% { --accent: #ff0000; --card-shadow: 0 0 10px rgba(255, 0, 0, 0.5); }
            33% { --accent: #00ff00; --card-shadow: 0 0 10px rgba(0, 255, 0, 0.5); }
            66% { --accent: #0000ff; --card-shadow: 0 0 10px rgba(0, 0, 255, 0.5); }
            100% { --accent: #ff0000; --card-shadow: 0 0 10px rgba(255, 0, 0, 0.5); }
        }
        @media (prefers-color-scheme: dark) {
            body:not(.theme-light):not(.theme-neon):not(.theme-blue):not(.theme-rose):not(.theme-rgb-lightning) {
                --bg: #181818;
                --text: #eee;
                --accent: #bb86fc;
                --card-bg: #232323;
                --card-shadow: rgba(0, 0, 0, 0.3);
            }
        }
        @media (prefers-reduced-motion: reduce) {
            .theme-rgb-lightning, .refresh-btn, .back-to-top, .movie-card, .logo, .pulse, .bomb-emoji {
                animation: none !important;
                transition: none !important;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="bulb">ðŸ’¡</div>
        <h1 class="liquid-text">samrat.sr</h1>
        <input id="searchBar" class="search-bar" type="text" placeholder="Search movies..." aria-label="Search movies" />
        <div class="theme-picker" aria-label="Theme picker">
            <button class="theme-btn selected" style="background: #fff; border: 1px solid #ccc" title="Light" data-theme="theme-light" aria-label="Light theme"></button>
            <button class="theme-btn" style="background: #232323" title="Dark" data-theme="theme-dark" aria-label="Dark theme"></button>
            <button class="theme-btn" style="background: linear-gradient(90deg, #39ff14 0%, #0f0c29 100%)" title="Neon" data-theme="theme-neon" aria-label="Neon theme"></button>
            <button class="theme-btn" style="background: #bbdefb" title="Blue" data-theme="theme-blue" aria-label="Blue theme"></button>
            <button class="theme-btn" style="background: #fce4ec" title="Rose" data-theme="theme-rose" aria-label="Rose theme"></button>
            <button class="theme-btn" style="background: linear-gradient(45deg, #ff0000, #00ff00, #0000ff)" title="RGB Lightning" data-theme="theme-rgb-lightning" aria-label="RGB Lightning theme"></button>
            <button class="theme-toggle" id="themeToggle">Auto Theme</button>
        </div>
        <select id="sortSelect" aria-label="Sort movies">
            <option value="title">Sort by Title</option>
            <option value="category">Sort by Category</option>
            <option value="original">Sort by Original Order</option>
        </select>
        <button class="refresh-btn" id="refreshBtn">ðŸ”„ Refresh</button>
    </header>

    <nav class="category-bar" id="categoryBar" role="navigation" aria-label="Category filter"></nav>

    <div class="content-wrapper">
        <main class="movies-container" id="moviesContainer" aria-live="polite"></main>
        <div class="pagination" id="paginationBar" role="navigation" aria-label="Pagination"></div>
        <div class="loading" id="loading" style="display: none;">Loading...</div>

        <div class="disclaimer">
            <strong>Disclaimer:</strong> Download links are provided by third-party sites. Use at your own risk and ensure your internet connection is secure.
        </div>
        <div style="background: #fff8dc; border-left: 5px solid gold; padding: 12px 16px; border-radius: 6px; font-family: sans-serif; color: #333; max-width: 400px; margin: 20px auto;">
            <strong style="color: goldenrod;">ðŸ’¡ Instructions:</strong>
            <p style="margin: 8px 0 0 0; font-size: 0.95em;">
                Click the download button below to download movies, only 720p 10 bits color is provided. Make sure your internet connection is stable for the best experience.
            </p>
        </div>

        <div class="marquee" aria-hidden="true">00101010101001100101101110101001010110101010100101010101001010111001010101010010101010101010101010101011101000101011110101001011</div>

        <span class="bomb-emojis" role="button" tabindex="0" aria-label="Explosive emojis">
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.1s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.2s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.3s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.4s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.5s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.6s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.7s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.8s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 0.9s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.1s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.2s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.3s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.4s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.5s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.6s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.7s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.8s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 1.9s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 2s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 2.1s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 2.2s;">ðŸ’£</span>
            <span class="bomb-emoji" style="animation: explode 0.3s ease-in-out infinite alternate 2.3s;">ðŸ’£</span>
        </span>

        <div class="stitched" role="button" tabindex="0" aria-label="Stitched text">mobile view is optimized for 2 columns</div>
        <div class="pulse"></div>
    </div>

    <button class="back-to-top" id="backToTop" aria-label="Back to top">â†‘</button>

    <div class="image-modal" id="imageModal">
        <span class="image-modal-close" id="imageModalClose" role="button" tabindex="0" aria-label="Close image modal">Ã—</span>
        <img id="modalImage" src="" alt="Full movie poster" />
    </div>

    <footer>Â© 2025 Samart's Gallery. All rights reserved.</footer>

    <script>
        // Simulated movies.json data
        const originalMovies = [
            {
                title: "Interstellar",
                category: "Sci-Fi",
                img: "https://image.tmdb.org/t/p/w500/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg",
                year: 2014,
                synopsis: "A team of explorers travel through a wormhole in space to ensure humanity's survival.",
                seasons: [{ label: "720p ^click", url: "https://mvlink.site/19104" }],
            },
            {
                title: "Along for the ride",
                category: "Romance",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/along-for-the-ride-2022-dual-audio-hindi-english-480p-720p-1080p-740x1111.jpg",
                year: 2022,
                synopsis: "",
                seasons: [{ label: "720p ^click", url: "https://mvlink.site/9189" }],
            },
            {
                title: "jerry margire",
                category: "Action",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/jerry-maguire-1996-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 1996,
                synopsis: "",
                seasons: [{ label: "720p ^click", url: "https://mvlink.site/9198" }],
            },
            {
                title: "All quite on the western front",
                category: "War",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/all-quiet-on-the-western-front-2022-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2022,
                synopsis: "german french war.",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/10653" }],
            },
            {
                title: "The Godfather",
                category: "Crime",
                img: "https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg",
                year: 1972,
                synopsis: "The aging patriarch of an organized crime dynasty transfers control to his son.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "The Dark Knight",
                category: "Action",
                img: "https://image.tmdb.org/t/p/w500/qJ2tW6WMUDux911r6m7haRef0WH.jpg",
                year: 2008,
                synopsis: "Batman faces the Joker, a criminal mastermind wreaking havoc in Gotham.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "Puss in boots",
                category: "Animation",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/puss-in-boots-2011-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2011,
                synopsis: "This is the true story of The Cat, The Myth, The Legendâ€¦ The Boots.",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/13720" }],
            },
            {
                title: "The persuit of happiness",
                category: "Drama",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/the-pursuit-of-happyness-2006-dual-audio-english-hindi-480p-720p-1080p-740x1110.jpg",
                year: 2006,
                synopsis: ".", // Updated in renderMovies to use fallback
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/13994" }],
            },
            {
                title: "Fight Club",
                category: "Drama",
                img: "https://image.tmdb.org/t/p/w500/pB8BM7pdSp6B6Ih7QZ4DrQ3BmJK.jpg",
                year: 1999,
                synopsis: "An insomniac and a soap salesman form an underground fight club.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "Inception",
                category: "Sci-Fi",
                img: "https://image.tmdb.org/t/p/w500/9gk7adHYeDvHkCSEqAvQNLV5Uge.jpg",
                year: 2010,
                synopsis: "A thief with the ability to enter dreams is given a final job.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "Enola holmes",
                category: "Fantasy",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/enola-holmes-2-2022-dual-audio-hindi-english-480p-720p-1080p-740x1109.jpgg",
                year: 2022,
                synopsis: "",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/10681" }],
            },
            {
                title: "Angel of the skies",
                category: "War",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/angel-of-the-skies-2013-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2013,
                synopsis: "--", // Updated in renderMovies to use fallback
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/9698" }],
            },
            {
                title: "Your name",
                category: "Animation",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/your-name-2016-multi-audio-hindi-english-japanese-480p-720p-1080p-740x1110.jpg",
                year: 2016,
                synopsis: "High schoolers Mitsuha and Taki are complete strangers living separate lives. But one night, they suddenly switch places. Mitsuha wakes up in Taki's body, and he in hers. ",
                seasons: [{ label: "Download 1080p", url: "https://mvlink.site/18014" }],
            },
            {
                title: "The good nurse",
                category: "Mystery",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/the-good-nurse-2022-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2022,
                synopsis: "Suspicious that her colleague is responsible for a series of mysterious patient deaths, a nurse risks her own life to uncover the truth.",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/10632" }],
            },
            {
                title: "Subservience ",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/gBenxR01Uy0Ev9RTIw6dVBPoyQU-740x1110.jpg",
                year: 2025,
                synopsis: "With his wife out sick, a struggling father brings home a lifelike AI, only to have his self-aware new help want everything her new family has to offerâ€¦ Like the affection of her owner and she'll kill to get it..",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/24912" }],
            },
            {
                title: "BogotÃ¡: City of the Lost",
                category: "Drama",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/gRqazsKqJPzHS9vHicxUCUNutpf-740x1110.jpg",
                year: 2025,
                synopsis: "After moving to BogotÃ¡ for a chance at a better life, a young Korean man rises through the Colombian black market â€” risking peril for a shot at success.",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/24478" }],
            },
            {
                title: "Dirty angels",
                category: "War",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/1y3TG8N8zwwMxqh0qzdyDs3IyCq-740x1110.jpg",
                year: 2024,
                synopsis: "During the United States' 2021 withdrawal from Afghanistan, a group of female soldiers posing as medical relief are sent back in to rescue a group of kidnapped teenagers caught between ISIS and the Taliban.",
                seasons: [{ label: "Downoad hd", url: "https://mvlink.site/25396" }],
            },
            {
                title: "I.S.S",
                category: "Sci-Fi",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/blPAS2HZcOGLTREbUeNIWmz0B6f-740x1110.jpg",
                year: 2024,
                synopsis: "Tensions flare in the near future aboard the International Space Station as a conflict breaks out on Earth. U.S. and Russian astronauts receive orders from the ground: take control of the station by any means necessary..",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/27402" }],
            },
            {
                title: "F9 the fast saga ",
                category: "Action",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/f9-the-fast-saga-2021-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2021,
                synopsis: "", // Updated in renderMovies to use fallback
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/13617" }],
            },
            {
                title: "Art of deception ",
                category: "Action",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/art-of-deception-2019-dual-audio-hindi-english-480p-720p-1080p-740x1090.jpg",
                year: 2019,
                synopsis: "thriller",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/11545" }],
            },
            {
                title: "After",
                category: "Romance",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/after-everything-2023-english-480p-720p-1080p-740x1110.jpg",
                year: 2023,
                synopsis: "Besieged by writer's block and the crushing breakup with Tessa, Hardin travels to Portugal in search of a woman he wronged in the past â€“ and to find himself..",
                seasons: [{ label: "Download 720", url: "https://mvlink.site/15794" }],
            },
            {
                title: "The Lion King",
                category: "Animation",
                img: "https://image.tmdb.org/t/p/w500/sKCr78MXSLixwmZ8DyJLrpMsd15.jpg",
                year: 1994,
                synopsis: "A young lion prince must reclaim his throne after tragedy.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "Toy Story",
                category: "Animation",
                img: "https://image.tmdb.org/t/p/w500/uXDfjJbdP4ijW5hWSBrPrlKpxab.jpg",
                year: 1995,
                synopsis: "A cowboy doll is threatened by a new spaceman toy.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "purple Hearts",
                category: "Romance",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/purple-hearts-2022-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2022,
                synopsis: "",
                seasons: [{ label: "Dowmload 720p", url: "https://mvlink.site/9833" }],
            },
            {
                title: "Separation",
                category: "Horror",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/separation-2021-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2021,
                synopsis: "A young girl finds solace in her artist father and the ghost of her dead mother.",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/11706" }],
            },
            {
                title:"wolf of wall street",
                category: "Crime",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/the-wolf-of-wall-street-2013-dual-audio-hindi-english-480p-720p-1080p-683x1024.jpg",
                year: 2013,
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/10786" }],
            },
            {
                title:"the wonder",
                category: "Drama",
                img: "https://joshmovies.com/wp-content/uploads/2025/07/the-wonder-2022-dual-audio-hindi-english-480p-720p-1080p-682x1024.jpg",
                year: 2022,
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/10830" }],
            },
            {
                title:"A silent voice",
                category: "Animation",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/a-silent-voice-the-movie-2016-multi-audio-hindi-english-japanese-480p-720p-1080p-683x1024.jpg",
                year: 2026,
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/14684" }],
            },
             {
                title:"insidious the red door",
                category: "Horror",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/insidious-the-red-door-2023-dual-audio-hindi-english-480p-720p-1080p-683x1024.jpg",
                year: 2023,
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/14657" }],
            },
            {
                title:"Beautiful disaster",
                category: "Romance",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/beautiful-disaster-2023-dual-audio-hindi-english-480p-720p-1080p-683x1024.jpg",
                year: 2022,
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/14163" }],
            },
            {
                title: "The working man",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/05/6FRFIogh3zFnVWn7Z6zcYnIbRcX-740x1110.jpg",
                year: 2025,
                synopsis: "thriller",
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/26614" }],
            },
            {
                title: "Deadpool",
                category: "Action",
                img: "https://image.tmdb.org/t/p/w500/yGSxJiK0A66Gu2nKryC3fV4Z4a.jpg",
                year: 2016,
                synopsis: "A wisecracking mercenary seeks revenge with newfound abilities.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "In a Violent Nature",
                category: "Horror",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/hPfWHgq07nXbeldwEGxWB4JqwtE-740x1110.jpg",
                year: 2024,
                synopsis: "The enigmatic resurrection, rampage, and retribution of an undead monster in a remote wilderness unleashes an iconic new killer after a locket is removed from a collapsed fire tower that entombed its rotting corpse..",
                seasons: [{ label: "Downoad hd", url: "https://mvlink.site/25327" }],
            },
            {
                title: "Jurassic predator",
                category: "Action",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/jurassic-predator-2018-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2018,
                synopsis: ".", // Updated in renderMovies to use fallback
                seasons: [{ label: "Download 720p", url: "https://mvlink.site/11821" }],
            },
            {
                title: "The Dive",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/1aLFglfGkTFG5p6KQg9o07EN3rl-740x1110.jpg",
                year: 2023,
                synopsis: "Two sisters go diving at a beautiful, remote location. One of the sisters is struck by a rock, leaving her trapped 28 meters below. With dangerously low levels of oxygen and cold temperatures, it is up to her sister to fight for her life.",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/23107" }],
            },
            {
                title: "Dont Move",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/cRDJxdnRb7ikKd6fVJTrGeaL34v-740x1110.jpg",
                year: 2024,
                synopsis: "A grieving woman in a secluded forest encounters a killer who injects her with a paralytic drug. As her body shuts down, her fight for survival begins.",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/22744" }],
            },
            {
                title: "Coco",
                category: "Animation",
                img: "https://image.tmdb.org/t/p/w500/gGEsBPAijhVUFoiWPCn5S0BbGVc.jpg",
                year: 2017,
                synopsis: "A boy journeys to the Land of the Dead to uncover his heritage.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "Joker",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/zPOOyw6HBb5Qo6uaWJ5UxrBR6Ll-740x1110.jpg",
                year: 2024,
                synopsis: "While struggling with his dual identity, Arthur Fleck not only stumbles upon true love, but also finds the music that's always been inside him.",
                seasons: [{ label: "Watch", url: "https://mvlink.site/22793" }],
            },
            {
                title: "Inside Out",
                category: "Animation",
                img: "https://image.tmdb.org/t/p/w500/lRHE0vzf3oYJrhbsHXjIkF4Tl5.jpg",
                year: 2015,
                synopsis: "Emotions guide a young girl through a life-changing move.",
                seasons: [{ label: "Watch", url: "#" }],
            },
            {
                title: "The platform 2",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/tvIpBg12IIA5Dr9Sjn38ygS1vQp-740x1096.jpg",
                year: 2024,
                synopsis: "After a mysterious leader imposes his law in a brutal system of vertical cells, a new arrival battles against a dubious food distribution method..",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/22396" }],
            },
            {
                title: "The Pool",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/qmND84lMjMx32E40LID5f7WJB7u-740x1110.jpg",
                year: 2018,
                synopsis: "Left alone to clean up a 6-meter-deep deserted pool, Day falls asleep on an inflatable raft. When he wakes, the water level has sunk so low that he can't climb out on his own.",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/22451" }],
            },
            {
                title: "X",
                category: "Horror",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/lopZSVtXzhFY603E9OqF7O1YKsh-740x1110.jpg",
                year: 2022,
                synopsis: "In 1979, a group of young filmmakers set out to make an adult film in rural Texas, but when their reclusive, elderly hosts catch them in the act, the cast find themselves fighting for their lives..",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/10295" }],
            },
            {
                title: "Download Kingdom of the Planet of the Apes",
                category: "Fantasy",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/gKkl37BQuKTanygYQG1pyYgLVgf-740x1110.jpg",
                year: 2024,
                synopsis: "Several generations following Caesar's reign, apes â€“ now the dominant species â€“ live harmoniously while humans have been reduced to living in the shadows..",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/21118" }],
            },
            {
                title: "SEVEN",
                category: "Thriller",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/se7en-1995-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 1995,
                synopsis: "Two homicide detectives are on a desperate hunt for a serial killer whose crimes are based on the \"seven deadly sins\" in this dark and haunting film that takes viewers from the tortured remains of one victim to the next.",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/20524" }],
            },

            {
                title: "The good shepherd",
                category: "History",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/the-good-shepherd-2006-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2006,
                synopsis: "see this",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/17492" }],
            },
            {
                title: "Ambush",
                category: "Action",
                img: "https://joshmovies.com/wp-content/uploads/2025/06/ambush-2023-dual-audio-hindi-english-480p-720p-1080p-740x1110.jpg",
                year: 2023,
                synopsis: "When a small outpost is ambushed, a US Army squad must take the battle below ground on a high-stakes mission in a new type of warfare the likes of which they have never seen..",
                seasons: [{ label: "Download hd", url: "https://mvlink.site/17240" }],
            }
        ];

        // Create a working copy of movies
        let movies = [...originalMovies];

        // Pagination settings
        const MOVIES_PER_PAGE = 10;
        let currentPage = 1;

        // Generate unique categories
        const categories = ["All", ...Array.from(new Set(originalMovies.map(m => m.category)))];

        // Elements
        const categoryBar = document.getElementById("categoryBar");
        const moviesContainer = document.getElementById("moviesContainer");
        const paginationBar = document.getElementById("paginationBar");
        const searchBar = document.getElementById("searchBar");
        const sortSelect = document.getElementById("sortSelect");
        const themeToggle = document.getElementById("themeToggle");
        const loading = document.getElementById("loading");
        const backToTop = document.getElementById("backToTop");
        const imageModal = document.getElementById("imageModal");
        const modalImage = document.getElementById("modalImage");
        const modalClose = document.getElementById("imageModalClose");
        const refreshBtn = document.getElementById("refreshBtn");

        // Render category buttons
        if (categoryBar) {
            categories.forEach(cat => {
                const btn = document.createElement("button");
                btn.className = "category-btn" + (cat === "All" ? " active" : "");
                btn.textContent = cat;
                btn.setAttribute("aria-label", `Filter by ${cat} category`);
                btn.addEventListener("click", () => {
                    document.querySelectorAll(".category-btn").forEach(b => b.classList.remove("active"));
                    btn.classList.add("active");
                    currentPage = 1;
                    renderMovies(cat, searchBar?.value.trim() || "");
                });
                categoryBar.appendChild(btn);
            });
        }

        // Intersection Observer for scroll animations
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("visible");
                        setTimeout(() => observer.unobserve(entry.target), 1000);
                    }
                });
            },
            { threshold: 0.1 }
        );

        // Render movies with pagination, category, and search
        function renderMovies(filterCat = "All", searchTerm = "") {
            if (!moviesContainer || !paginationBar || !loading) {
                console.error("Required DOM elements are missing.");
                moviesContainer.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#999;" role="alert">Error: Page elements are missing.</div>`;
                return;
            }
            if (!movies || !Array.isArray(movies)) {
                console.error("Movies data is invalid.");
                moviesContainer.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#999;" role="alert">No movies available.</div>`;
                loading.style.display = "none";
                return;
            }

            loading.style.display = "block";
            moviesContainer.innerHTML = "";
            moviesContainer.setAttribute("aria-busy", "true");

            // Show skeleton loaders
            for (let i = 0; i < MOVIES_PER_PAGE; i++) {
                const skeleton = document.createElement("div");
                skeleton.className = "movie-card skeleton";
                skeleton.innerHTML = `
                    <div class="movie-poster" style="background: #eee;"></div>
                    <div class="movie-description">
                        <div style="background: #eee; height: 20px; margin-bottom: 8px;"></div>
                        <div style="background: #eee; height: 40px;"></div>
                    </div>
                `;
                moviesContainer.appendChild(skeleton);
            }

            setTimeout(() => {
                try {
                    const filtered = movies.filter(
                        m =>
                            (filterCat === "All" || m.category === filterCat) &&
                            m.title.toLowerCase().includes(searchTerm.toLowerCase())
                    );

                    const sorted = [...filtered].sort((a, b) => {
                        const sortBy = sortSelect?.value || "title";
                        if (sortBy === "original") {
                            const indexA = originalMovies.findIndex(m => m.title === a.title);
                            const indexB = originalMovies.findIndex(m => m.title === b.title);
                            return indexA - indexB;
                        }
                        return a[sortBy].localeCompare(b[sortBy]);
                    });

                    const pageCount = Math.ceil(sorted.length / MOVIES_PER_PAGE);
                    currentPage = Math.min(currentPage, pageCount || 1);

                    const start = (currentPage - 1) * MOVIES_PER_PAGE;
                    const end = start + MOVIES_PER_PAGE;
                    const paginated = sorted.slice(start, end);

                    moviesContainer.innerHTML = "";
                    if (paginated.length === 0) {
                        moviesContainer.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#999;" role="alert">No movies found.</div>`;
                    } else {
                        paginated.forEach(movie => {
                            const card = document.createElement("div");
                            card.className = "movie-card";
                            card.setAttribute("aria-label", `Movie: ${movie.title}, ${movie.category}, ${movie.year}`);
                            const displaySynopsis = movie.synopsis && ![".", "--", ""].includes(movie.synopsis.trim())
                                ? movie.synopsis
                                : "No synopsis available.";
                            card.innerHTML = `
                                <div class="movie-poster">
                                    <img src="${movie.img}"
                                         srcset="${movie.img} 300w, ${movie.img} 150w"
                                         sizes="(max-width: 768px) 150px, 300px"
                                         alt="${movie.title} poster"
                                         onerror="this.src='https://via.placeholder.com/300x168?text=Image+Not+Found';this.classList.add('error');"
                                         loading="lazy" decoding="async">
                                </div>
                                <div class="movie-description">
                                    <strong>${movie.title} (${movie.year})</strong>
                                    <p><strong>Category:</strong> ${movie.category}</p>
                                    <p>${displaySynopsis}</p>
                                    ${movie.seasons.map(s => `<a href="${s.url}" class="season-link" target="_blank" rel="noopener noreferrer">${s.label}</a>`).join("")}
                                </div>
                            `;
                            moviesContainer.appendChild(card);
                            observer.observe(card);
                            card.querySelector("img").addEventListener("click", () => {
                                modalImage.src = movie.img;
                                modalImage.alt = `${movie.title} full poster`;
                                imageModal.style.display = "flex";
                                modalClose.focus();
                            });
                        });
                    }

                    // Generate pagination with page numbers
                    paginationBar.innerHTML = `
                        <button id="prevBtn" ${currentPage === 1 ? "disabled aria-disabled='true'" : ""} aria-label="Previous page">Previous</button>
                        <span>Page <input type="number" id="pageInput" min="1" max="${pageCount || 1}" value="${currentPage}" aria-label="Current page"> of ${pageCount || 1}</span>
                        ${generatePageButtons(pageCount)}
                        <button id="nextBtn" ${currentPage === pageCount ? "disabled aria-disabled='true'" : ""} aria-label="Next page">Next</button>
                    `;

                    document.getElementById("prevBtn")?.addEventListener("click", () => {
                        if (currentPage > 1) {
                            currentPage--;
                            renderMovies(filterCat, searchTerm);
                        }
                    });
                    document.getElementById("nextBtn")?.addEventListener("click", () => {
                        if (currentPage < pageCount) {
                            currentPage++;
                            renderMovies(filterCat, searchTerm);
                        }
                    });
                    document.getElementById("pageInput")?.addEventListener("change", (e) => {
                        const page = parseInt(e.target.value);
                        if (page >= 1 && page <= pageCount) {
                            currentPage = page;
                            renderMovies(filterCat, searchTerm);
                        } else {
                            e.target.value = currentPage;
                        }
                    });
                    document.querySelectorAll(".page-btn").forEach(btn => {
                        btn.addEventListener("click", () => {
                            currentPage = parseInt(btn.dataset.page);
                            renderMovies(filterCat, searchTerm);
                        });
                    });

                    moviesContainer.setAttribute("aria-busy", "false");
                    loading.style.display = "none";
                } catch (error) {
                    console.error("Error rendering movies:", error);
                    moviesContainer.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#999;" role="alert">Error loading movies.</div>`;
                    moviesContainer.setAttribute("aria-busy", "false");
                    loading.style.display = "none";
                }
            }, 300);
        }

        // Generate page number buttons
        function generatePageButtons(pageCount) {
            let buttons = "";
            const maxButtons = 5;
            let start = Math.max(1, currentPage - Math.floor(maxButtons / 2));
            let end = Math.min(pageCount, start + maxButtons - 1);
            if (end - start < maxButtons - 1) {
                start = Math.max(1, end - maxButtons + 1);
            }
            for (let i = start; i <= end; i++) {
                buttons += `<button class="page-btn${i === currentPage ? " active" : ""}" data-page="${i}" aria-label="Page ${i}">${i}</button>`;
            }
            if (end < pageCount) {
                buttons += `<span>...</span><button class="page-btn" data-page="${pageCount}" aria-label="Page ${pageCount}">${pageCount}</button>`;
            }
            return buttons;
        }

        // Debounced search
        let searchTimeout;
        searchBar?.addEventListener("input", () => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                currentPage = 1;
                renderMovies(
                    document.querySelector(".category-btn.active")?.textContent || "All",
                    searchBar.value.trim()
                );
            }, 200);
        });

        // Sort change
        sortSelect?.addEventListener("change", () => {
            currentPage = 1;
            renderMovies(
                document.querySelector(".category-btn.active")?.textContent || "All",
                searchBar?.value.trim() || ""
            );
        });

        // Refresh button functionality
        refreshBtn?.addEventListener("click", () => {
            // Shuffle a copy of the movies array
            movies = [...originalMovies].sort(() => Math.random() - 0.5);

            // Reset to default state
            currentPage = 1;
            if (searchBar) searchBar.value = "";
            if (sortSelect) sortSelect.value = "title";
            document.querySelectorAll(".category-btn").forEach(btn => {
                btn.classList.remove("active");
                if (btn.textContent === "All") {
                    btn.classList.add("active");
                }
            });

            // Add spinning animation
            let rotation = 0;
            refreshBtn.classList.add("spinning");
            function rotate() {
                rotation += 10;
                refreshBtn.style.transform = `rotate(${rotation}deg)`;
                if (rotation < 360) {
                    requestAnimationFrame(rotate);
                } else {
                    refreshBtn.classList.remove("spinning");
                    refreshBtn.style.transform = "rotate(0deg)";
                }
            }
            requestAnimationFrame(rotate);

            // Re-render movies
            renderMovies("All", "");
        });

        // Theme handling
        const themes = ["theme-light", "theme-dark", "theme-neon", "theme-blue", "theme-rose", "theme-rgb-lightning"];
        let currentThemeIndex = 0;
        let autoSwitch = localStorage.getItem("autoSwitchTheme") === "true";
        const themeBtns = document.querySelectorAll(".theme-btn");

        function setTheme(theme) {
            document.body.className = theme;
            themeBtns.forEach((btn, i) => {
                btn.classList.toggle("selected", btn.dataset.theme === theme);
                if (btn.dataset.theme === theme) currentThemeIndex = i;
            });
            localStorage.setItem("movieTheme", theme);
        }

        themeBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                setTheme(btn.dataset.theme);
                autoSwitch = false;
                localStorage.setItem("autoSwitchTheme", "false");
                themeToggle.textContent = "Auto Theme";
                clearInterval(themeInterval);
            });
        });

        let themeInterval;
        function startAutoTheme() {
            if (autoSwitch && !window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
                themeInterval = setInterval(() => {
                    currentThemeIndex = (currentThemeIndex + 1) % themes.length;
                    setTheme(themes[currentThemeIndex]);
                }, 5000);
            } else {
                clearInterval(themeInterval);
            }
        }

        themeToggle?.addEventListener("click", () => {
            autoSwitch = !autoSwitch;
            localStorage.setItem("autoSwitchTheme", autoSwitch);
            themeToggle.textContent = autoSwitch ? "Stop Auto" : "Auto Theme";
            startAutoTheme();
        });

        // Initialize theme
        const savedTheme = localStorage.getItem("movieTheme");
        const systemTheme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "theme-dark" : "theme-light";
        setTheme(savedTheme || systemTheme);
        if (autoSwitch) {
            themeToggle.textContent = "Stop Auto";
            startAutoTheme();
        }

        // Scroll handling
        window.addEventListener("scroll", () => {
            const currentScroll = window.scrollY;
            backToTop?.classList.toggle("visible", currentScroll > 300);
        });

        backToTop?.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
        backToTop?.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === "Space") {
                window.scrollTo({ top: 0, behavior: "smooth" });
            }
        });

        modalClose?.addEventListener("click", () => {
            imageModal.style.display = "none";
        });
        modalClose?.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === "Space") {
                imageModal.style.display = "none";
            }
        });

        imageModal?.addEventListener("click", e => {
            if (e.target === imageModal) imageModal.style.display = "none";
        });

        // Add interactivity to bomb emojis
        document.querySelectorAll(".bomb-emoji").forEach(emoji => {
            emoji.addEventListener("click", () => {
                emoji.style.transform = "scale(1.5)";
                setTimeout(() => emoji.style.transform = "scale(1)", 200);
            });
            emoji.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === "Space") {
                    emoji.style.transform = "scale(1.5)";
                    setTimeout(() => emoji.style.transform = "scale(1)", 200);
                }
            });
        });

        // Add interactivity to stitched text
        const stitched = document.querySelector(".stitched");
        stitched?.addEventListener("click", () => {
            stitched.style.background = stitched.style.background === "yellow" ? "#f9f9f9" : "yellow";
        });
        stitched?.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === "Space") {
                stitched.style.background = stitched.style.background === "yellow" ? "#f9f9f9" : "yellow";
            }
        });

        // Initial render
        renderMovies();
        window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", e => {
            if (!localStorage.getItem("movieTheme") && !autoSwitch) {
                setTheme(e.matches ? "theme-dark" : "theme-light");
            }
        });
    </script>
</body>
</html>
